{"openapi":"3.0.1","info":{"title":"Customer Service API","license":{"name":"Apache 2.0","url":"http://springdoc.org"},"version":"V0"},"servers":[{"url":"http://localhost:9090/customer-service"}],"security":[{"bearerScheme":[]}],"paths":{"/customers":{"get":{"tags":["customer-rest-service"],"description":"Returns list of customers with given criterias","operationId":"getAll","parameters":[{"name":"filter","in":"query","required":true,"schema":{"type":"string"}},{"name":"x-transaction-id","in":"header","description":"Correlation Id"}],"responses":{"200":{"description":"default response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Customer"}}}}}}},"put":{"tags":["customer-rest-service"],"description":"Updates a customer","operationId":"update","parameters":[{"name":"x-transaction-id","in":"header","description":"Correlation Id"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCustomerRequest"}}}},"responses":{"200":{"description":"default response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Customer"}}}}}},"post":{"tags":["customer-rest-service"],"description":"Creates a customer","operationId":"create","parameters":[{"name":"x-transaction-id","in":"header","description":"Correlation Id"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCustomerRequest"}}}},"responses":{"200":{"description":"default response","content":{"application/json":{"schema":{"type":"integer","format":"int64"}}}}}}},"/customers/search/{filter}":{"get":{"tags":["customer-rest-service"],"description":"Returns list of customers with given criterias","operationId":"search","parameters":[{"name":"filter","in":"path","required":true,"schema":{"type":"string"}},{"name":"x-transaction-id","in":"header","description":"Correlation Id"}],"responses":{"200":{"description":"default response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Customer"}}}}}}}},"/customers/{id}":{"get":{"tags":["customer-rest-service"],"description":"Returns customer with given id ","operationId":"getById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"x-transaction-id","in":"header","description":"Correlation Id"}],"responses":{"200":{"description":"default response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Customer"}}}}}},"delete":{"tags":["customer-rest-service"],"description":"Deletes a customer","operationId":"deleteCustomer","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"x-transaction-id","in":"header","description":"Correlation Id"}],"responses":{"200":{"description":"default response","content":{"application/json":{"schema":{"type":"boolean"}}}}}}},"/customers/{id}/contactmedium":{"put":{"tags":["customer-rest-service"],"description":"Updates a customer's contact medium","operationId":"updateContactMedium","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"x-transaction-id","in":"header","description":"Correlation Id"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContactMediumDto"}}}},"responses":{"200":{"description":"default response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Customer"}}}}}},"delete":{"tags":["customer-rest-service"],"description":"Deletes a customer's contact medium","operationId":"deleteContactMedium","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"x-transaction-id","in":"header","description":"Correlation Id"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContactMediumDto"}}}},"responses":{"200":{"description":"default response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Customer"}}}}}}},"/customers/{id}/characteristic":{"put":{"tags":["customer-rest-service"],"description":"Updates a customer's characteristic value","operationId":"updateCharacteristic","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"x-transaction-id","in":"header","description":"Correlation Id"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CharacteristicDto"}}}},"responses":{"200":{"description":"default response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Customer"}}}}}},"delete":{"tags":["customer-rest-service"],"description":"Deletes a customer's contact medium","operationId":"deleteCharacteristic","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"x-transaction-id","in":"header","description":"Correlation Id"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CharacteristicDto"}}}},"responses":{"200":{"description":"default response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Customer"}}}}}}},"/customers/{id}/permission":{"put":{"tags":["customer-rest-service"],"description":"Adds a permission customer's permissions","operationId":"addPermission","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"x-transaction-id","in":"header","description":"Correlation Id"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PermissionDto"}}}},"responses":{"200":{"description":"default response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Customer"}}}}}},"delete":{"tags":["customer-rest-service"],"description":"Removes a permission from customer's permissions","operationId":"removePermission","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"x-transaction-id","in":"header","description":"Correlation Id"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PermissionDto"}}}},"responses":{"200":{"description":"default response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Customer"}}}}}}},"/customers/{id}/agreement":{"put":{"tags":["customer-rest-service"],"description":"Updates a customer's agreement","operationId":"updateAgreement","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"x-transaction-id","in":"header","description":"Correlation Id"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgreementDto"}}}},"responses":{"200":{"description":"default response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Customer"}}}}}}},"/customers/firms":{"get":{"tags":["customer-rest-service"],"description":"Returns list of firms","operationId":"getAllFirms","parameters":[{"name":"x-transaction-id","in":"header","description":"Correlation Id"}],"responses":{"200":{"description":"default response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Firm"}}}}}}}}},"components":{"schemas":{"AddressDto":{"type":"object","properties":{"city":{"type":"string"},"country":{"type":"string"},"postcode":{"type":"string"},"stateOrProvince":{"type":"string"},"streetOne":{"type":"string"},"streetTwo":{"type":"string"}}},"UpdateCustomerRequest":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"firstName":{"type":"string"},"lastName":{"type":"string"},"nationalId":{"type":"string"},"firmName":{"type":"string"},"communicationEmail":{"type":"string"},"agreementEmail":{"type":"string"},"mobilePhone":{"pattern":"^\\d{10}$","type":"string"},"countryCode":{"type":"string"},"address":{"$ref":"#/components/schemas/AddressDto"},"birthDate":{"type":"string","format":"date-time"}}},"Agreement":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"description":{"type":"string"},"value":{"type":"string"},"customer":{"$ref":"#/components/schemas/Customer"}}},"Characteristic":{"type":"object","properties":{"name":{"type":"string"},"value":{"type":"string"},"id":{"type":"integer","format":"int64"},"customer":{"$ref":"#/components/schemas/Customer"}}},"ContactMedium":{"type":"object","properties":{"type":{"type":"string"},"validFor":{"$ref":"#/components/schemas/ValidFor"},"mediumCharacteristic":{"$ref":"#/components/schemas/MediumCharacteristic"},"preferred":{"type":"boolean"},"id":{"type":"integer","format":"int64"},"customer":{"$ref":"#/components/schemas/Customer"}}},"Customer":{"required":["firstName"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"firstName":{"type":"string"},"lastName":{"type":"string"},"nationalId":{"type":"string"},"status":{"type":"string","enum":["POTENTIAL","ACTIVE","DEACTIVE"]},"countryCode":{"type":"string"},"birthDate":{"type":"string","format":"date-time"},"characteristic":{"type":"array","items":{"$ref":"#/components/schemas/Characteristic"}},"contactMedium":{"type":"array","items":{"$ref":"#/components/schemas/ContactMedium"}},"relatedParty":{"$ref":"#/components/schemas/RelatedParty"},"permissions":{"type":"array","items":{"$ref":"#/components/schemas/Permission"}},"firm":{"$ref":"#/components/schemas/Firm"},"agreements":{"type":"array","items":{"$ref":"#/components/schemas/Agreement"}}}},"Firm":{"type":"object","properties":{"idfirm":{"type":"integer","format":"int64"},"name":{"type":"string"},"parentFirm":{"$ref":"#/components/schemas/Firm"}}},"MediumCharacteristic":{"type":"object","properties":{"city":{"type":"string"},"country":{"type":"string"},"emailAddress":{"type":"string"},"type":{"type":"string"},"number":{"type":"string"},"postcode":{"type":"string"},"stateOrProvince":{"type":"string"},"streetOne":{"type":"string"},"streetTwo":{"type":"string"},"id":{"type":"integer","format":"int64"},"contactMedium":{"$ref":"#/components/schemas/ContactMedium"}}},"Permission":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"customer":{"$ref":"#/components/schemas/Customer"},"grantedById":{"type":"integer","format":"int32"},"name":{"type":"string"}}},"RelatedParty":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"role":{"type":"string"},"name":{"type":"string"},"customer":{"$ref":"#/components/schemas/Customer"}}},"ValidFor":{"type":"object","properties":{"startDateTime":{"type":"string","format":"date-time"},"endDateTime":{"type":"string","format":"date-time"},"id":{"type":"integer","format":"int64"},"contactMedium":{"$ref":"#/components/schemas/ContactMedium"}}},"CreateCustomerRequest":{"required":["firmName"],"type":"object","properties":{"firstName":{"type":"string"},"lastName":{"type":"string"},"nationalId":{"type":"string"},"communicationEmail":{"type":"string"},"agreementEmail":{"type":"string"},"mobilePhone":{"pattern":"^\\d{10}$","type":"string"},"deviceId":{"type":"string"},"kvkkPermission":{"type":"boolean"},"etkSmsPermission":{"type":"boolean"},"etkPhonePermission":{"type":"boolean"},"etkEmailPermission":{"type":"boolean"},"countryCode":{"type":"string"},"birthDate":{"type":"string","format":"date-time"},"firmName":{"type":"string"},"address":{"$ref":"#/components/schemas/AddressDto"}}},"ContactMediumDto":{"type":"object","properties":{"type":{"type":"string"},"city":{"type":"string"},"country":{"type":"string"},"emailAddress":{"type":"string"},"number":{"type":"string"},"postcode":{"type":"string"},"stateOrProvince":{"type":"string"},"streetOne":{"type":"string"},"streetTwo":{"type":"string"}}},"CharacteristicDto":{"type":"object","properties":{"name":{"type":"string"},"value":{"type":"string"}}},"PermissionDto":{"type":"object","properties":{"name":{"type":"string"}}},"AgreementDto":{"required":["description","value"],"type":"object","properties":{"description":{"type":"string"},"value":{"type":"string"}}}},"securitySchemes":{"bearerScheme":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}